<!-- Ad Section with Swiper -->
<section class="ad-swiper swiper" id="addSection">
  <div class="swiper-wrapper" id="addSlides"></div>

  <!-- Optional Swiper controls -->
  <div class="swiper-pagination"></div>
  <div class="swiper-button-next"></div>
  <div class="swiper-button-prev"></div>
</section>

<script>
async function loadHomepageAdd() {
  try {
    const response = await fetch("/api/ads-list/?page=1&pageSize=10"); // Fetch more ads if needed
    const data = await response.json();

    if (data.success && data.data.length > 0) {
      const wrapper = document.getElementById("addSlides");

      data.data.forEach(ad => {
        const imageUrl = ad.image ? `data:image/jpeg;base64,${ad.image}` : "";

        const slide = document.createElement("div");
        slide.className = "swiper-slide";

        slide.innerHTML = `
          <div class="add-slide" style="
            background-image: url('${imageUrl}');
            background-size: cover;
            background-position: center;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 2rem;
          ">
            <div class="add-content"hidden>
              <h2 hidden>${ad.heading ||""}</h2>
              <p>${ad.description || ""}</p>
              <a href="${ad.link || "#"}" class="shop-btn" hidden>Shop now</a>
            </div>
          </div>
        `;

        wrapper.appendChild(slide);
      });

      new Swiper(".ad-swiper", {
        loop: true,
        autoplay: {
          delay: 4000,
          disableOnInteraction: false,
        },
        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });
    }
  } catch (error) {
    console.error("Failed to load homepage ads:", error);
  }
}

document.addEventListener("DOMContentLoaded", loadHomepageAdd);
</script>
